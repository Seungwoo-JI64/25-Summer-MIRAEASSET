<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤ - ë¯¸ë˜ì—ì…‹</title>
    <!-- êµ¬ê¸€ í°íŠ¸ Noto Sans KR ì„í¬íŠ¸ (í•œê¸€ ê°€ë…ì„± í–¥ìƒ) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chart.js CDN ì„í¬íŠ¸ (ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ê¸° ìœ„í•¨) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        /* ë¯¸ë˜ì—ì…‹ ìŠ¤íƒ€ì¼ ë³€ìˆ˜ ì •ì˜ */
        :root {
            --mirae-main-orange: #FF6D00; /* ë¯¸ë˜ì—ì…‹ì˜ ì‹œê·¸ë‹ˆì²˜ ì˜¤ë Œì§€ */
            --mirae-dark-blue: #002D62;   /* í¬ì¸íŠ¸ ë‚¨ìƒ‰ ê³„ì—´ */
            --mirae-text-dark: #333333;   /* ì¼ë°˜ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
            --mirae-text-light: #666666;  /* ë³´ì¡° í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
            --mirae-bg-light: #f9f9f9;    /* ì„¹ì…˜ ë°°ê²½ìƒ‰ (ì•„ì£¼ ì—°í•œ íšŒìƒ‰) */
            --mirae-border-light: #e9e9e9;/* ê²½ê³„ì„  ìƒ‰ìƒ */
            --mirae-positive: #28a745;    /* ìƒìŠ¹ (ì´ˆë¡ìƒ‰) */
            --mirae-negative: #dc3545;    /* í•˜ë½ (ë¹¨ê°„ìƒ‰) */
            --mirae-hover-blue-light: #e6f3ff; /* í…Œì´ë¸” ë¡œìš° í˜¸ë²„ ì‹œ ì—°í•œ íŒŒë‘ */
            --mirae-light-orange-bg: #fffaf0; /* ë‰´ìŠ¤ ì˜ì—­ ë°°ê²½ì˜ ì•„ì£¼ ì—°í•œ ì˜¤ë Œì§€ */
            --mirae-light-orange-border: #ffe0b2; /* ë‰´ìŠ¤ ì˜ì—­ ê²½ê³„ì„ ì˜ ì—°í•œ ì˜¤ë Œì§€ */

            /* ê·¸ë˜í”„ ë¼ì¸ ìƒ‰ìƒ (ë¯¸ë˜ì—ì…‹ ëŠë‚Œìœ¼ë¡œ ì¶”ê°€) */
            --chart-line-color-1: #FF6D00; /* ì˜¤ë Œì§€ */
            --chart-line-color-2: #002D62; /* ë‚¨ìƒ‰ */
            --chart-line-color-3: #1A936F; /* ë…¹ìƒ‰ */
            --chart-line-color-4: #60499C; /* ë³´ë¼ìƒ‰ */
            --chart-line-color-5: #FFC107; /* ë…¸ë€ìƒ‰ */
        }

        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Noto Sans KR', sans-serif; /* í•œê¸€ í°íŠ¸ ìš°ì„  ì ìš© */
            margin: 0;
            padding: 0;
            background-color: var(--mirae-bg-light); /* ì—°í•œ íšŒìƒ‰ ë°°ê²½ */
            color: var(--mirae-text-dark);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased; /* í°íŠ¸ ë¶€ë“œëŸ½ê²Œ */
            -moz-osx-font-smoothing: grayscale; /* í°íŠ¸ ë¶€ë“œëŸ½ê²Œ */
        }
        .container {
            max-width: 1200px;
            margin: 20px auto;
            background-color: #ffffff;
            padding: 40px;
            border-radius: 10px; /* ì•½ê°„ ë” ë‘¥ê·¼ ëª¨ì„œë¦¬ */
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08); /* ê·¸ë¦¼ì ê°•í™” */
        }

        /* í—¤ë” */
        .header {
            background-color: var(--mirae-dark-blue); /* ë‚¨ìƒ‰ ë°°ê²½ */
            color: #ffffff;
            padding: 25px 0;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 5px solid var(--mirae-main-orange); /* ì˜¤ë Œì§€ìƒ‰ í•˜ë‹¨ ê²½ê³„ì„  */
        }
        .header h1 {
            margin: 0;
            font-size: 2.8em;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: -1px; /* ìê°„ ì¡°ì ˆ */
            padding-bottom: 0;
            border-bottom: none;
        }
        .header h1 span {
            font-size: 0.6em;
            display: block;
            opacity: 0.8;
            font-weight: 300;
            margin-top: 5px;
        }

        /* ì„¹ì…˜ ì œëª© (h1, h2) */
        h1 { /* í˜ì´ì§€ ë‚´ ì£¼ìš” ì œëª© (ì˜ˆ: ë‚´ ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤) */
            text-align: center;
            color: var(--mirae-dark-blue); /* ë‚¨ìƒ‰ */
            font-size: 2.5em;
            margin-bottom: 40px;
            border-bottom: 3px solid var(--mirae-border-light); /* ì—°í•œ íšŒìƒ‰ ì¤„ */
            padding-bottom: 15px;
        }
        h2 {
            color: var(--mirae-dark-blue); /* ë‚¨ìƒ‰ */
            border-bottom: 2px solid var(--mirae-border-light);
            padding-bottom: 12px;
            margin-top: 40px;
            margin-bottom: 25px;
            font-size: 2em;
            font-weight: 500;
        }

        /* í¬íŠ¸í´ë¦¬ì˜¤ ìš”ì•½ ì„¹ì…˜ */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }
        .summary-card {
            background-color: #ffffff;
            border: 1px solid var(--mirae-border-light);
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease-in-out;
        }
        .summary-card:hover {
            transform: translateY(-5px); /* í˜¸ë²„ ì‹œ ì‚´ì§ ìœ„ë¡œ */
        }
        .summary-card strong {
            display: block;
            font-size: 1.1em;
            color: var(--mirae-text-dark);
            margin-bottom: 12px;
            font-weight: 400;
        }
        .summary-card .value {
            font-size: 2.2em;
            font-weight: 700;
            color: var(--mirae-dark-blue); /* í‰ê°€ê¸ˆì•¡ ë“±ì€ ë‚¨ìƒ‰ */
            letter-spacing: -0.5px;
        }
        .summary-card .value.positive {
            color: var(--mirae-positive);
        }
        .summary-card .value.negative {
            color: var(--mirae-negative);
        }

        /* ë³´ìœ  ì£¼ì‹ í…Œì´ë¸” */
        .stock-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            font-size: 0.95em;
        }
        .stock-table th, .stock-table td {
            border: 1px solid var(--mirae-border-light);
            padding: 15px;
            text-align: left;
        }
        .stock-table th {
            background-color: var(--mirae-dark-blue); /* ë‚¨ìƒ‰ í—¤ë” */
            color: white;
            font-weight: 500;
            white-space: nowrap;
        }
        .stock-table tbody tr:nth-child(even) {
            background-color: #fcfcfc; /* ì§ìˆ˜ í–‰ ë°°ê²½ìƒ‰ */
        }
        .stock-table tbody tr:hover {
            background-color: var(--mirae-hover-blue-light); /* ë¯¸ë˜ì—ì…‹ ëŠë‚Œì˜ ì—°í•œ íŒŒë‘ í˜¸ë²„ */
        }
        .stock-table .text-right {
            text-align: right;
        }
        .stock-table .profit {
            color: var(--mirae-positive);
            font-weight: 500;
        }
        .stock-table .loss {
            color: var(--mirae-negative);
            font-weight: 500;
        }

        /* í´ë¦­ ê°€ëŠ¥í•œ ì¢…ëª©ëª… */
        .stock-name-link {
            cursor: pointer;
            color: var(--mirae-main-orange); /* ì˜¤ë Œì§€ìƒ‰ ë§í¬ */
            text-decoration: none; /* ì´ˆê¸° ë°‘ì¤„ ì œê±° */
            font-weight: 600; /* ì¢€ ë” ê°•ì¡° */
            transition: color 0.2s ease-in-out;
        }
        .stock-name-link:hover {
            color: #cc5700; /* í˜¸ë²„ ì‹œ ì˜¤ë Œì§€ìƒ‰ ì§„í•˜ê²Œ */
            text-decoration: underline; /* í˜¸ë²„ ì‹œ ë°‘ì¤„ ì¶”ê°€ */
        }

        /* ë‰´ìŠ¤ í‘œì‹œ ì˜ì—­ */
        #news-display-area {
            margin-top: 60px;
            padding: 30px;
            background-color: var(--mirae-light-orange-bg); /* ì•„ì£¼ ì—°í•œ ì˜¤ë Œì§€ ê³„ì—´ ë°°ê²½ */
            border-radius: 8px;
            border: 1px solid var(--mirae-light-orange-border); /* ì—°í•œ ì˜¤ë Œì§€ ê²½ê³„ì„  */
            display: none; /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
        }
        #news-display-area h3 {
            color: var(--mirae-dark-blue); /* ë‚¨ìƒ‰ ì œëª© */
            font-size: 1.8em;
            margin-bottom: 25px;
            border-bottom: 1px dashed var(--mirae-light-orange-border); /* ì—°í•œ ì˜¤ë Œì§€ ì ì„  */
            padding-bottom: 10px;
            font-weight: 500;
        }
        .news-item {
            background-color: #ffffff;
            border: 1px solid var(--mirae-border-light);
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03); /* ì€ì€í•œ ê·¸ë¦¼ì */
            transition: box-shadow 0.2s ease-in-out;
        }
        .news-item:hover {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); /* í˜¸ë²„ ì‹œ ê·¸ë¦¼ì ê°•í™” */
        }
        .news-item h4 {
            color: var(--mirae-text-dark);
            font-size: 1.25em;
            margin-top: 0;
            margin-bottom: 10px;
            font-weight: 500;
        }
        .news-item p {
            font-size: 0.9em;
            color: var(--mirae-text-light);
            line-height: 1.7;
        }
        .news-item .tickers {
            font-size: 0.85em;
            color: var(--mirae-main-orange); /* ì˜¤ë Œì§€ìƒ‰ í‹°ì»¤ */
            margin-top: 15px;
            font-weight: 700;
        }

        /* ê·¸ë˜í”„ ì˜ì—­ */
        .chart-container {
            width: 100%;
            max-width: 900px; /* ì°¨íŠ¸ ìµœëŒ€ ë„ˆë¹„ */
            margin: 40px auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        .chart-container h3 {
            text-align: center;
            color: var(--mirae-dark-blue);
            font-size: 1.8em;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--mirae-border-light);
            padding-bottom: 15px;
        }


        /* í‘¸í„° */
        .footer {
            text-align: center;
            margin-top: 60px;
            padding: 25px 0;
            border-top: 1px solid var(--mirae-border-light);
            color: var(--mirae-text-light);
            font-size: 0.85em;
            background-color: #fcfcfc; /* í‘¸í„° ë°°ê²½ë„ ì•½ê°„ ì—°í•˜ê²Œ */
        }
        .footer p {
            margin: 5px 0;
        }
        .footer a {
            color: var(--mirae-dark-blue); /* ë‚¨ìƒ‰ ë§í¬ */
            text-decoration: none;
            font-weight: 500;
        }
        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ë¯¸ë˜ì—ì…‹ ì¦ê¶Œ <span>Smart Portfolio</span></h1>
    </div>

    <div class="container">
        <h1>ğŸ“ˆ ë‚´ ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤</h1>

        <!-- í¬íŠ¸í´ë¦¬ì˜¤ ìš”ì•½ ì„¹ì…˜ (ì˜ˆì‹œ ë°ì´í„°) -->
        <h2>ğŸ’° í¬íŠ¸í´ë¦¬ì˜¤ ìš”ì•½</h2>
        <div class="summary-grid">
            <div class="summary-card">
                <strong>ì´ íˆ¬ì ê¸ˆì•¡</strong>
                <div class="value">10,000,000 ì›</div>
            </div>
            <div class="summary-card">
                <strong>í˜„ì¬ í‰ê°€ ê¸ˆì•¡</strong>
                <div class="value">10,550,000 ì›</div>
            </div>
            <div class="summary-card">
                <strong>ì´ ì†ìµ (ì›)</strong>
                <div class="value positive">+550,000 ì›</div>
            </div>
            <div class="summary-card">
                <strong>ì´ ì†ìµ (%)</strong>
                <div class="value positive">+5.50 %</div>
            </div>
        </div>

        <!-- í¬íŠ¸í´ë¦¬ì˜¤ ì„±ê³¼ ê·¸ë˜í”„ -->
        <div class="chart-container">
            <h3>ğŸ“ˆ í¬íŠ¸í´ë¦¬ì˜¤ ìˆ˜ìµë¥  ë³€í™”</h3>
            <canvas id="portfolioPerformanceChart"></canvas>
        </div>


        <!-- ë³´ìœ  ì£¼ì‹ ëª©ë¡ ì„¹ì…˜ (ì˜ˆì‹œ ë°ì´í„°) -->
        <h2>ğŸ“Š ë‚´ ë³´ìœ  ì£¼ì‹</h2>
        <table class="stock-table">
            <thead>
                <tr>
                    <th>ì¢…ëª©ëª…</th>
                    <th>í‹°ì»¤</th>
                    <th>ë³´ìœ  ìˆ˜ëŸ‰</th>
                    <th>í‰ê·  ë‹¨ê°€</th>
                    <th>í˜„ì¬ê°€</th>
                    <th>í‰ê°€ ì†ìµ (ì›)</th>
                    <th>í‰ê°€ ì†ìµ (%)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="stock-name-link" data-ticker="NVDA">ì—”ë¹„ë””ì•„</span></td>
                    <td>NVDA</td>
                    <td class="text-right">10 ì£¼</td>
                    <td class="text-right">120,000 ì›</td>
                    <td class="text-right">135,000 ì›</td>
                    <td class="text-right profit">+150,000 ì›</td>
                    <td class="text-right profit">+12.50 %</td>
                </tr>
                <tr>
                    <td><span class="stock-name-link" data-ticker="AAPL">ì• í”Œ</span></td>
                    <td>AAPL</td>
                    <td class="text-right">5 ì£¼</td>
                    <td class="text-right">180,000 ì›</td>
                    <td class="text-right">175,000 ì›</td>
                    <td class="text-right loss">-25,000 ì›</td>
                    <td class="text-right loss">-2.78 %</td>
                </tr>
                <tr>
                    <td><span class="stock-name-link" data-ticker="MSFT">ë§ˆì´í¬ë¡œì†Œí”„íŠ¸</span></td>
                    <td>MSFT</td>
                    <td class="text-right">8 ì£¼</td>
                    <td class="text-right">400,000 ì›</td>
                    <td class="text-right">410,000 ì›</td>
                    <td class="text-right profit">+80,000 ì›</td>
                    <td class="text-right profit">+2.50 %</td>
                </tr>
                <!--
                ì—¬ê¸°ì— ë” ë§ì€ ë³´ìœ  ì£¼ì‹ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                í´ë¦­ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë ¤ë©´ <td><span class="stock-name-link" data-ticker="[í‹°ì»¤ëª…]">ì¢…ëª©ëª…</span></td> í˜•ì‹ìœ¼ë¡œ ë³€ê²½í•˜ì„¸ìš”.
                ì£¼ì˜: ì•„ë˜ ì˜ˆì‹œë“¤ì€ í´ë¦­ ê¸°ëŠ¥ì´ ì—†ìŠµë‹ˆë‹¤ (span íƒœê·¸ ë¯¸ì ìš©).
                -->
                <tr>
                    <td>í…ŒìŠ¬ë¼</td>
                    <td>TSLA</td>
                    <td class="text-right">3 ì£¼</td>
                    <td class="text-right">250,000 ì›</td>
                    <td class="text-right">230,000 ì›</td>
                    <td class="text-right loss">-60,000 ì›</td>
                    <td class="text-right loss">-8.00 %</td>
                </tr>
                <tr>
                    <td>êµ¬ê¸€ (ì•ŒíŒŒë²³ A)</td>
                    <td>GOOGL</td>
                    <td class="text-right">2 ì£¼</td>
                    <td class="text-right">150,000 ì›</td>
                    <td class="text-right">160,000 ì›</td>
                    <td class="text-right profit">+20,000 ì›</td>
                    <td class="text-right profit">+6.67 %</td>
                </tr>
            </tbody>
        </table>

        <!-- ë‰´ìŠ¤ í‘œì‹œ ì˜ì—­ -->
        <div id="news-display-area">
            <!-- JavaScriptë¡œ ë‚´ìš©ì´ ì±„ì›Œì§ˆ ê³³ -->
        </div>
    </div>

    <div class="footer">
        <p>Â© 2023 ë¯¸ë˜ì—ì…‹ì¦ê¶Œ. All rights reserved.</p>
        <p>íˆ¬ììœ ì˜ì‚¬í•­: ë³¸ ìë£ŒëŠ” íˆ¬ììì˜ íˆ¬ìë¥¼ ë•ê¸° ìœ„í•˜ì—¬ ì‘ì„±ëœ ê²ƒì´ë©°, ì–´ë– í•œ ê²½ìš°ì—ë„ ë¶ˆë²•ì ì¸ ìë£Œ ë°°í¬ ë˜ëŠ” ìœ ì¶œ ë“±ìœ¼ë¡œ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
        <p><a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> | <a href="#">ì´ìš©ì•½ê´€</a></p>
    </div>

    <script>
        // Pythonì—ì„œ ìƒì„±ëœ ë‰´ìŠ¤ ë°ì´í„°ë¥¼ JavaScript ë³€ìˆ˜ë¡œ ì„ë² ë“œë  ë¶€ë¶„
        const allCompanyNewsData = {all_company_news_data_json};

        // ë‰´ìŠ¤ í‘œì‹œ ì˜ì—­ DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const newsDisplayArea = document.getElementById('news-display-area');

        // íŠ¹ì • ê¸°ì—…ì˜ ë‰´ìŠ¤ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜ (ê¸°ì¡´ê³¼ ë™ì¼)
        function displayCompanyNews(ticker) {
            newsDisplayArea.innerHTML = ''; // ì´ì „ ë‰´ìŠ¤ ë‚´ìš© ì‚­ì œ
            newsDisplayArea.style.display = 'block'; // ë‰´ìŠ¤ ì˜ì—­ ë³´ì´ê²Œ ì„¤ì •

            const companyData = allCompanyNewsData[ticker];

            if (!companyData || !companyData.selected_news || companyData.selected_news.length === 0) {
                newsDisplayArea.innerHTML = `<h3>ğŸš¨ ${companyData ? companyData.company_name : ticker} ê´€ë ¨ í•µì‹¬ ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.</h3>`;
                return;
            }

            let newsHtml = `<h3>${companyData.company_name} ê´€ë ¨ í•µì‹¬ ë‰´ìŠ¤ (Gemini AI ì„ ë³„)</h3>`;
            
            companyData.selected_news.forEach(selectedItem => {
                const newsIndex = selectedItem.index;
                const relatedTickers = selectedItem.related_tickers;
                
                // full_news_listì—ì„œ ì‹¤ì œ ë‰´ìŠ¤ ë‚´ìš©ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
                const fullNews = companyData.full_news_list[newsIndex];

                if (fullNews) {
                    newsHtml += `
                        <div class="news-item">
                            <h4>${fullNews.title}</h4>
                            <p>${fullNews.summary}</p>
                            <div class="tickers">ê´€ë ¨ í‹°ì»¤: ${relatedTickers.join(', ') || 'ì—†ìŒ'}</div>
                        </div>
                    `;
                }
            });
            newsDisplayArea.innerHTML = newsHtml;
        }

        // ëª¨ë“  ì¢…ëª©ëª… ë§í¬ì— í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ (ê¸°ì¡´ê³¼ ë™ì¼)
        document.addEventListener('DOMContentLoaded', () => {
            const stockNameLinks = document.querySelectorAll('.stock-name-link');
            stockNameLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault(); // ë§í¬ì˜ ê¸°ë³¸ ë™ì‘(í˜ì´ì§€ ì´ë™) ë°©ì§€
                    const ticker = event.target.dataset.ticker; // data-ticker ì†ì„± ê°’ ê°€ì ¸ì˜¤ê¸°
                    displayCompanyNews(ticker);
                });
            });

            // --- ì°¨íŠ¸ ë Œë”ë§ ì‹œì‘ ---
            const ctx = document.getElementById('portfolioPerformanceChart').getContext('2d');
            const datasets = [];
            const labels = []; // ëª¨ë“  ë°ì´í„°ì…‹ì˜ ë‚ ì§œ ë ˆì´ë¸”ì„ ì €ì¥í•  ë°°ì—´

            // ë¯¸ë¦¬ ì •ì˜ëœ ìƒ‰ìƒ íŒ”ë ˆíŠ¸
            const chartColors = [
                'var(--chart-line-color-1)', /* ì˜¤ë Œì§€ */
                'var(--chart-line-color-2)', /* ë‚¨ìƒ‰ */
                'var(--chart-line-color-3)', /* ë…¹ìƒ‰ */
                'var(--chart-line-color-4)', /* ë³´ë¼ìƒ‰ */
                'var(--chart-line-color-5)'  /* ë…¸ë€ìƒ‰ */
            ];

            let colorIndex = 0;

            // allCompanyNewsDataì—ì„œ ê·¸ë˜í”„ ë°ì´í„° ì¶”ì¶œ ë° Chart.js ë°ì´í„°ì…‹ ìƒì„±
            for (const ticker in allCompanyNewsData) {
                const companyData = allCompanyNewsData[ticker];
                if (companyData.historical_performance && companyData.historical_performance.length > 0) {
                    // ì²« ë²ˆì§¸ ë°ì´í„°ì…‹ì—ì„œ ë‚ ì§œ ë ˆì´ë¸”ì„ ê°€ì ¸ì˜µë‹ˆë‹¤ (ëª¨ë“  ë°ì´í„°ì…‹ì˜ ë‚ ì§œê°€ ë™ì¼í•˜ë‹¤ê³  ê°€ì •)
                    if (labels.length === 0) {
                        companyData.historical_performance.forEach(item => {
                            labels.push(item.date);
                        });
                    }

                    const performanceValues = companyData.historical_performance.map(item => item.value);
                    
                    datasets.push({
                        label: companyData.company_name + ' ìˆ˜ìµë¥  (%)',
                        data: performanceValues,
                        borderColor: chartColors[colorIndex % chartColors.length], // ìƒ‰ìƒ ìˆœí™˜ ì‚¬ìš©
                        backgroundColor: 'rgba(0,0,0,0)', // ì±„ìš°ì§€ ì•ŠìŒ
                        tension: 0.3, // ì„ ì„ ë¶€ë“œëŸ½ê²Œ
                        pointRadius: 0, // í¬ì¸íŠ¸ ìˆ¨ê¹€
                        borderWidth: 2
                    });
                    colorIndex++;
                }
            }

            if (datasets.length > 0) {
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false, // ì»¨í…Œì´ë„ˆ í¬ê¸°ì— ë§ì¶° ì¡°ì ˆ
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top',
                                labels: {
                                    font: {
                                        family: 'Noto Sans KR',
                                        size: 14
                                    },
                                    color: 'var(--mirae-text-dark)'
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += context.parsed.y.toFixed(2) + '%';
                                        }
                                        return label;
                                    }
                                },
                                titleFont: { family: 'Noto Sans KR' },
                                bodyFont: { family: 'Noto Sans KR' }
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'ë‚ ì§œ',
                                    color: 'var(--mirae-text-dark)',
                                    font: { family: 'Noto Sans KR', size: 14 }
                                },
                                ticks: {
                                    color: 'var(--mirae-text-light)',
                                    font: { family: 'Noto Sans KR' },
                                    autoSkip: true,
                                    maxTicksLimit: 10 // ë„ˆë¬´ ë§ì€ ë ˆì´ë¸” ë°©ì§€
                                },
                                grid: {
                                    color: 'var(--mirae-border-light)'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'ìˆ˜ìµë¥  (%)',
                                    color: 'var(--mirae-text-dark)',
                                    font: { family: 'Noto Sans KR', size: 14 }
                                },
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    },
                                    color: 'var(--mirae-text-light)',
                                    font: { family: 'Noto Sans KR' }
                                },
                                grid: {
                                    color: 'var(--mirae-border-light)'
                                }
                            }
                        }
                    }
                });
            }
            // --- ì°¨íŠ¸ ë Œë”ë§ ë ---
        });
    </script>
</body>
</html>